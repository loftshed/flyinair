{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\petel\\\\Documents\\\\CODE\\\\concordia-bootcamps\\\\project-slingair\\\\frontend\\\\src\\\\components\\\\Reservation.js\",\n    _s = $RefreshSig$();\n\nimport styled from \"styled-components\";\nimport { useContext, useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { AppContext } from \"./AppContext\";\nimport LoadingSpinner from \"./Anim/LoadingSpinner\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Reservation = () => {\n  _s();\n\n  const {\n    reservationId,\n    setReservationId,\n    setCurrentReservation,\n    currentReservation,\n    setShowCancelSuccessModal,\n    setErrorMessage,\n    setSelectedFlight,\n    setSelectedSeat\n  } = useContext(AppContext);\n  const [loading, setLoading] = useState(false);\n  const [confirmCancel, setConfirmCancel] = useState(false);\n  const [showSpinner, setShowSpinner] = useState(false);\n  const history = useHistory();\n  useEffect(() => {\n    (async () => {\n      try {\n        setLoading(true);\n        const data = await fetch(`/api/get-reservation?reservationId=${reservationId}`);\n        const {\n          reservation\n        } = await data.json();\n        setCurrentReservation(reservation);\n        setLoading(false);\n      } catch (err) {\n        // console.log(err);\n        setErrorMessage(err);\n        history.push(\"\");\n      }\n    })();\n  }, [setCurrentReservation, reservationId, setErrorMessage, history]);\n\n  const handleDeleteReservation = async () => {\n    const handleProcessDeletion = () => {\n      // add some fake delay to delete\n      setShowSpinner(true);\n      setShowCancelSuccessModal(true);\n      setReservationId(\"\");\n      setCurrentReservation({});\n      localStorage.clear(\"reservationId\");\n      setTimeout(() => {\n        setShowSpinner(false);\n        history.push(\"/\");\n      }, Math.floor(Math.random() * 1000));\n      console.log(\"Reservation deleted successfully.\");\n    };\n\n    try {\n      const updateSeats = await fetch(`/api/update-availability?flightNum=${currentReservation.flight}&seatId=${currentReservation.seat}&isAvailable`, {\n        method: \"PATCH\"\n      });\n      console.log(updateSeats);\n      const deleteReservation = await fetch(`/api/delete-reservation?reservationId=${reservationId}`, {\n        method: \"DELETE\"\n      });\n\n      if (deleteReservation.ok && updateSeats.ok) {\n        handleProcessDeletion();\n      }\n    } catch (err) {\n      // console.log(err);\n      setErrorMessage(err);\n      history.push(\"\");\n    }\n  };\n\n  if (loading || !currentReservation || showSpinner) return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: \"flex\",\n      height: \"100%\",\n      width: \"100%\",\n      justifyContent: \"center\",\n      alignItems: \"center\"\n    },\n    children: /*#__PURE__*/_jsxDEV(Border, {\n      children: /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 7\n  }, this);\n  const {\n    _id,\n    flight,\n    seat,\n    givenName,\n    surname,\n    email\n  } = currentReservation;\n  return /*#__PURE__*/_jsxDEV(Wrapper, {\n    children: /*#__PURE__*/_jsxDEV(Border, {\n      children: [/*#__PURE__*/_jsxDEV(BookingContainer, {\n        children: [/*#__PURE__*/_jsxDEV(Heading, {\n          children: \"Your reservation:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Details, {\n          style: {\n            display: \"flex\",\n            flexDirection: \"column\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(Item, {\n            children: [/*#__PURE__*/_jsxDEV(ItemHeading, {\n              children: \"Booking ID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 15\n            }, this), \": \", _id]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Item, {\n            children: [/*#__PURE__*/_jsxDEV(ItemHeading, {\n              children: \"Passenger\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 15\n            }, this), \": \", givenName, \" \", surname]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Item, {\n            children: [/*#__PURE__*/_jsxDEV(ItemHeading, {\n              children: \"Contact\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 15\n            }, this), \": \", email]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Item, {\n            children: [/*#__PURE__*/_jsxDEV(ItemHeading, {\n              children: \"Flight Number\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 15\n            }, this), \": \", flight]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Item, {\n            children: [/*#__PURE__*/_jsxDEV(ItemHeading, {\n              children: \"Seat\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 15\n            }, this), \": \", seat]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Options, {\n        children: [!confirmCancel ? /*#__PURE__*/_jsxDEV(Button, {\n          type: \"button\",\n          onClick: () => {\n            setConfirmCancel(true);\n          },\n          style: {\n            textShadow: \"-2px 0px var(--color-red)\"\n          },\n          children: \"Cancel Booking\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Button, {\n          type: \"button\",\n          style: {\n            backgroundColor: \"var(--color-red)\",\n            width: \"153px\",\n            textAlign: \"center\"\n          },\n          onClick: () => {\n            handleDeleteReservation();\n          },\n          children: \"Are you sure?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"button\",\n          style: {\n            textShadow: \"2px 0px var(--color-red)\"\n          },\n          onClick: () => {\n            setSelectedSeat(currentReservation.seat);\n            setSelectedFlight(currentReservation.flight);\n            history.push(\"/modify-reservation\");\n          },\n          children: \"Modify Booking\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Reservation, \"CJi6kK1gT1ciNWlpipT/Jzwz388=\", false, function () {\n  return [useHistory];\n});\n\n_c = Reservation;\nconst Wrapper = styled.div`\n  display: flex;\n  height: 100%;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  font-family: Kosugi;\n\n  color: var(--color-dark-blue);\n`;\n_c2 = Wrapper;\nconst Border = styled.div`\n  gap: 20px;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: var(--main-width);\n  justify-content: center;\n  align-items: center;\n  border-left: 3px dashed var(--color-yellow);\n  border-right: 3px dashed var(--color-yellow);\n`;\n_c3 = Border;\nconst BookingContainer = styled.div`\n  display: flex;\n  gap: 25px;\n  flex-direction: column;\n  align-items: center;\n  border: dashed 2px var(--color-dark-blue);\n  border-radius: 5px;\n  padding: 25px;\n  width: 600px;\n`;\n_c4 = BookingContainer;\nconst Heading = styled.h3`\n  color: var(--color-medium-blue);\n`;\n_c5 = Heading;\nconst Details = styled.ul`\n  gap: 15px;\n`;\n_c6 = Details;\nconst Item = styled.li`\n  font-size: 20px;\n`;\n_c7 = Item;\nconst ItemHeading = styled.span`\n  font-weight: 600;\n`;\n_c8 = ItemHeading;\nconst Options = styled.div`\n  display: flex;\n  justify-content: space-between;\n  border-radius: 5px;\n  width: 330px;\n  /* border: dashed 2px var(--color-dark-blue); */\n  /* padding: 10px; */\n`;\n_c9 = Options;\nconst Button = styled.button`\n  font-size: 16px;\n  padding: 5px 10px;\n  border-radius: 5px;\n  border: none;\n  background-color: var(--color-yellow);\n  font-family: inherit;\n  letter-spacing: 1.5px;\n  cursor: pointer;\n  &:hover {\n    background-color: var(--color-orange);\n  }\n`;\n_c10 = Button;\nexport default Reservation;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10;\n\n$RefreshReg$(_c, \"Reservation\");\n$RefreshReg$(_c2, \"Wrapper\");\n$RefreshReg$(_c3, \"Border\");\n$RefreshReg$(_c4, \"BookingContainer\");\n$RefreshReg$(_c5, \"Heading\");\n$RefreshReg$(_c6, \"Details\");\n$RefreshReg$(_c7, \"Item\");\n$RefreshReg$(_c8, \"ItemHeading\");\n$RefreshReg$(_c9, \"Options\");\n$RefreshReg$(_c10, \"Button\");","map":{"version":3,"sources":["C:/Users/petel/Documents/CODE/concordia-bootcamps/project-slingair/frontend/src/components/Reservation.js"],"names":["styled","useContext","useEffect","useState","useHistory","AppContext","LoadingSpinner","Reservation","reservationId","setReservationId","setCurrentReservation","currentReservation","setShowCancelSuccessModal","setErrorMessage","setSelectedFlight","setSelectedSeat","loading","setLoading","confirmCancel","setConfirmCancel","showSpinner","setShowSpinner","history","data","fetch","reservation","json","err","push","handleDeleteReservation","handleProcessDeletion","localStorage","clear","setTimeout","Math","floor","random","console","log","updateSeats","flight","seat","method","deleteReservation","ok","display","height","width","justifyContent","alignItems","_id","givenName","surname","email","flexDirection","textShadow","backgroundColor","textAlign","Wrapper","div","Border","BookingContainer","Heading","h3","Details","ul","Item","li","ItemHeading","span","Options","Button","button"],"mappings":"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","sourcesContent":["import styled from \"styled-components\";\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { AppContext } from \"./AppContext\";\r\nimport LoadingSpinner from \"./Anim/LoadingSpinner\";\r\n\r\nconst Reservation = () => {\r\n  const {\r\n    reservationId,\r\n    setReservationId,\r\n    setCurrentReservation,\r\n    currentReservation,\r\n    setShowCancelSuccessModal,\r\n    setErrorMessage,\r\n    setSelectedFlight,\r\n    setSelectedSeat,\r\n  } = useContext(AppContext);\r\n  const [loading, setLoading] = useState(false);\r\n  const [confirmCancel, setConfirmCancel] = useState(false);\r\n  const [showSpinner, setShowSpinner] = useState(false);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        setLoading(true);\r\n        const data = await fetch(\r\n          `/api/get-reservation?reservationId=${reservationId}`\r\n        );\r\n        const { reservation } = await data.json();\r\n        setCurrentReservation(reservation);\r\n        setLoading(false);\r\n      } catch (err) {\r\n        // console.log(err);\r\n        setErrorMessage(err);\r\n        history.push(\"\");\r\n      }\r\n    })();\r\n  }, [setCurrentReservation, reservationId, setErrorMessage, history]);\r\n\r\n  const handleDeleteReservation = async () => {\r\n    const handleProcessDeletion = () => {\r\n      // add some fake delay to delete\r\n      setShowSpinner(true);\r\n      setShowCancelSuccessModal(true);\r\n      setReservationId(\"\");\r\n      setCurrentReservation({});\r\n      localStorage.clear(\"reservationId\");\r\n      setTimeout(() => {\r\n        setShowSpinner(false);\r\n        history.push(\"/\");\r\n      }, Math.floor(Math.random() * 1000));\r\n      console.log(\"Reservation deleted successfully.\");\r\n    };\r\n\r\n    try {\r\n      const updateSeats = await fetch(\r\n        `/api/update-availability?flightNum=${currentReservation.flight}&seatId=${currentReservation.seat}&isAvailable`,\r\n        {\r\n          method: \"PATCH\",\r\n        }\r\n      );\r\n      console.log(updateSeats);\r\n      const deleteReservation = await fetch(\r\n        `/api/delete-reservation?reservationId=${reservationId}`,\r\n        {\r\n          method: \"DELETE\",\r\n        }\r\n      );\r\n      if (deleteReservation.ok && updateSeats.ok) {\r\n        handleProcessDeletion();\r\n      }\r\n    } catch (err) {\r\n      // console.log(err);\r\n      setErrorMessage(err);\r\n      history.push(\"\");\r\n    }\r\n  };\r\n\r\n  if (loading || !currentReservation || showSpinner)\r\n    return (\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          height: \"100%\",\r\n          width: \"100%\",\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        <Border>\r\n          <LoadingSpinner />\r\n        </Border>\r\n      </div>\r\n    );\r\n\r\n  const { _id, flight, seat, givenName, surname, email } = currentReservation;\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Border>\r\n        <BookingContainer>\r\n          <Heading>Your reservation:</Heading>\r\n          <Details style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n            <Item>\r\n              <ItemHeading>Booking ID</ItemHeading>: {_id}\r\n            </Item>\r\n            <Item>\r\n              <ItemHeading>Passenger</ItemHeading>: {givenName} {surname}\r\n            </Item>\r\n            <Item>\r\n              <ItemHeading>Contact</ItemHeading>: {email}\r\n            </Item>\r\n            <Item>\r\n              <ItemHeading>Flight Number</ItemHeading>: {flight}\r\n            </Item>\r\n            <Item>\r\n              <ItemHeading>Seat</ItemHeading>: {seat}\r\n            </Item>\r\n          </Details>\r\n        </BookingContainer>\r\n        <Options>\r\n          {!confirmCancel ? (\r\n            <Button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                setConfirmCancel(true);\r\n              }}\r\n              style={{ textShadow: \"-2px 0px var(--color-red)\" }}\r\n            >\r\n              Cancel Booking\r\n            </Button>\r\n          ) : (\r\n            <Button\r\n              type=\"button\"\r\n              style={{\r\n                backgroundColor: \"var(--color-red)\",\r\n                width: \"153px\",\r\n                textAlign: \"center\",\r\n              }}\r\n              onClick={() => {\r\n                handleDeleteReservation();\r\n              }}\r\n            >\r\n              Are you sure?\r\n            </Button>\r\n          )}\r\n\r\n          <Button\r\n            type=\"button\"\r\n            style={{ textShadow: \"2px 0px var(--color-red)\" }}\r\n            onClick={() => {\r\n              setSelectedSeat(currentReservation.seat);\r\n              setSelectedFlight(currentReservation.flight);\r\n              history.push(\"/modify-reservation\");\r\n            }}\r\n          >\r\n            Modify Booking\r\n          </Button>\r\n        </Options>\r\n      </Border>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  height: 100%;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-family: Kosugi;\r\n\r\n  color: var(--color-dark-blue);\r\n`;\r\n\r\nconst Border = styled.div`\r\n  gap: 20px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  width: var(--main-width);\r\n  justify-content: center;\r\n  align-items: center;\r\n  border-left: 3px dashed var(--color-yellow);\r\n  border-right: 3px dashed var(--color-yellow);\r\n`;\r\n\r\nconst BookingContainer = styled.div`\r\n  display: flex;\r\n  gap: 25px;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  border: dashed 2px var(--color-dark-blue);\r\n  border-radius: 5px;\r\n  padding: 25px;\r\n  width: 600px;\r\n`;\r\n\r\nconst Heading = styled.h3`\r\n  color: var(--color-medium-blue);\r\n`;\r\n\r\nconst Details = styled.ul`\r\n  gap: 15px;\r\n`;\r\nconst Item = styled.li`\r\n  font-size: 20px;\r\n`;\r\nconst ItemHeading = styled.span`\r\n  font-weight: 600;\r\n`;\r\n\r\nconst Options = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  border-radius: 5px;\r\n  width: 330px;\r\n  /* border: dashed 2px var(--color-dark-blue); */\r\n  /* padding: 10px; */\r\n`;\r\n\r\nconst Button = styled.button`\r\n  font-size: 16px;\r\n  padding: 5px 10px;\r\n  border-radius: 5px;\r\n  border: none;\r\n  background-color: var(--color-yellow);\r\n  font-family: inherit;\r\n  letter-spacing: 1.5px;\r\n  cursor: pointer;\r\n  &:hover {\r\n    background-color: var(--color-orange);\r\n  }\r\n`;\r\n\r\nexport default Reservation;\r\n"]},"metadata":{},"sourceType":"module"}